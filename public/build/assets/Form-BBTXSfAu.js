import{l as x,o as s,m as Y,a as n,e as h,d,F as g,r as P,t as M,T as Fe,g as k,p as Ie,c as Te,b as I,n as S,u as o,q as T,s as R,x as _,y as Re}from"./app-Bh6teFlZ.js";import{d as _e,u as Ye,a as Ue,b as Oe}from"./AlertBox.vue_vue_type_style_index_0_scoped_75fc6ea2_lang-a-fdcAZL.js";import Ve from"./Title-DkEG-CHn.js";import He from"./FirstName-DkzDNGMr.js";import $e from"./LastName-CEr0AsnQ.js";import We from"./DateOfBirth-DMM7eHCI.js";import je from"./MobilePhone-CTV8gkX_.js";import qe from"./HomePhone-B_ihzRU8.js";import Je from"./Dependants-GPRIa2bm.js";import ze from"./Email-D0qNMRMo.js";import Ge from"./MaritalStatus-COVPRkVo.js";import Ke from"./AdultsLivingWith-C4R-YFMF.js";import Qe from"./LoanAmount-DWemIuPu.js";import Xe from"./LoanTerm-CbGM7PIY.js";import Ze from"./LoanPurpose-DTBROy0e.js";import et from"./RecentLoanCount-CC7wGq4y.js";import tt from"./EmploymentStatus-CNcBBDiZ.js";import ot from"./IncomeFrequency-yyS4mn7S.js";import st from"./EmployerName-k1pThY2M.js";import at from"./JobTitle-t4HRmJBu.js";import rt from"./EmploymentIndustry-BhahfMUh.js";import nt from"./EmployerYears-B56shVCd.js";import lt from"./NextPayDate-BcuGGhcO.js";import mt from"./FollowingPayDate-C_xxIUAy.js";import it from"./NetMonthlyIncome-FCTS9deM.js";import pt from"./ResidentialStatus-BMf7LyYl.js";import dt from"./HouseNameNumber-BaCD9tPa.js";import ut from"./StreetAddress-BCpw_LWf.js";import ft from"./County-YLUyjQ7M.js";import ct from"./City-C6xdshva.js";import yt from"./Postcode-CNCq3XNx.js";import ht from"./AddressYears-CE9fr9UB.js";import vt from"./MonthlyMortgageRent-C8P9Mb-K.js";import bt from"./Transport-o51hV-Pu.js";import gt from"./Utilities-rYiWQDKw.js";import Et from"./Food-Cz8pCXZa.js";import Ct from"./Credit-Dsntge-4.js";import xt from"./Council-Czwypuvl.js";import At from"./Other-DSGC5o4n.js";import kt from"./BankCard-nlE-dy-8.js";import St from"./BankAccountNumber-qyU-u_6H.js";import Nt from"./BankSortCode-ByNMRjZM.js";import Pt from"./ConsentMarketing-BkOoc2D7.js";import{_ as Mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Bt={key:0,class:"fixed inset-x-0 top-0 mx-auto mt-4 max-w-lg bg-red-100 border border-red-400 text-red-800 p-4 rounded shadow-lg z-50"},Lt={class:"list-disc list-inside space-y-1 text-sm"},wt={__name:"AlertBox",props:{show:Boolean,errors:{type:Array,default:()=>[]}},emits:["dismiss"],setup(A){return(t,v)=>(s(),x(Fe,{name:"fade"},{default:Y(()=>[A.show?(s(),n("div",Bt,[d("button",{onClick:v[0]||(v[0]=p=>t.$emit("dismiss")),class:"absolute top-1 right-1 text-red-600 hover:text-red-800","aria-label":"Close"},"×"),v[1]||(v[1]=d("strong",{class:"block font-semibold mb-2"},"Please fix the following errors:",-1)),d("ul",Lt,[(s(!0),n(g,null,P(A.errors,(p,u)=>(s(),n("li",{key:u},M(p),1))),128))])])):h("",!0)]),_:1}))}},N=Mt(wt,[["__scopeId","data-v-75fc6ea2"]]),Dt={class:"max-w-xl mx-auto py-2"},Ft={class:"flex mb-6"},It=["onClick"],Tt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Rt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_t={key:0,class:"text-2xl mb-2 text-center"},Yt=["disabled"],Ut=["disabled"],Ot={key:1,class:"mt-4"},Vt={key:1,class:"mt-6 text-center"},Fo={__name:"Form",setup(A){const t=k(1),p=Ie().props.trackingParams,u=k(!1),B=k(!1),l=_e.useForm({AffID:p.AffID??"Default",OfferID:p.OfferID??1,Campaign:p.Campaign??"",AffSub:p.AffSub??"",AffSub2:p.AffSub2??"",AffSub3:p.AffSub3??"",AffSub4:p.AffSub4??"",AffSub5:p.AffSub5??"",CreationUrl:window.location.href,ReferrerUrl:document.referrer||window.location.href,IpAddress:"127.0.0.1",UserAgent:navigator.userAgent,LoanAmount:"",LoanTerm:"",LoanPurpose:"",Title:"",FirstName:"",LastName:"",DateOfBirth:"",MobilePhone:"",HomePhone:"",Email:"",Dependants:"",MaritalStatus:"",RecentLoanCount:"",AdultsLivingWith:"",ResidentialStatus:"",HouseNameNumber:"",StreetAddress:"",County:"",City:"",Postcode:"",AddressYears:"",EmploymentStatus:"",IncomeFrequency:"",EmployerName:"",JobTitle:"",EmploymentIndustry:"",WorkPhone:"",NextPayDate:"",FollowingPayDate:"",EmployerYears:"",NetMonthlyIncome:"",ExpenseMonthlyMortgageRent:"",ExpenseCouncil:"",ExpenseFood:"",ExpenseTransport:"",ExpenseCredit:"",ExpenseUtilities:"",ExpenseOther:"",BankDirectDeposit:1,BankCard:"",BankAccountNumber:"",BankSortCode:"",BankYears:"",ConsentFinancial:1,MarketingSms:"",MarketingEmail:"",MarketingPhone:"",touched:{AffID:!1,OfferID:!1,Campaign:!1,AffSub:!1,AffSub2:!1,AffSub3:!1,AffSub4:!1,AffSub5:!1,CreationUrl:!1,ReferrerUrl:!1,IpAddress:!1,UserAgent:!1,LoanAmount:!1,LoanTerm:!1,LoanPurpose:!1,Title:!1,FirstName:!1,LastName:!1,DateOfBirth:!1,MobilePhone:!1,HomePhone:!1,Email:!1,Dependants:!1,MaritalStatus:!1,RecentLoanCount:!1,AdultsLivingWith:!1,ResidentialStatus:!1,HouseNameNumber:!1,StreetAddress:!1,County:!1,City:!1,Postcode:!1,AddressYears:!1,EmploymentStatus:!1,IncomeFrequency:!1,EmployerName:!1,JobTitle:!1,EmploymentIndustry:!1,WorkPhone:!1,NextPayDate:!1,FollowingPayDate:!1,EmployerYears:!1,NetMonthlyIncome:!1,ExpenseMonthlyMortgageRent:!1,ExpenseCouncil:!1,ExpenseFood:!1,ExpenseTransport:!1,ExpenseCredit:!1,ExpenseUtilities:!1,ExpenseOther:!1,BankDirectDeposit:!1,BankCard:!1,BankAccountNumber:!1,BankSortCode:!1,BankYears:!1,ConsentFinancial:!1,MarketingSms:!1,MarketingEmail:!1,MarketingPhone:""},errors:{AffID:"",OfferID:"",Campaign:"",AffSub:"",AffSub2:"",AffSub3:"",AffSub4:"",AffSub5:"",CreationUrl:"",ReferrerUrl:"",IpAddress:"",UserAgent:"",LoanAmount:"",LoanTerm:"",LoanPurpose:"",Title:"",FirstName:"",LastName:"",DateOfBirth:"",MobilePhone:"",HomePhone:"",Email:"",Dependants:"",MaritalStatus:"",RecentLoanCount:"",AdultsLivingWith:"",ResidentialStatus:"",HouseNameNumber:"",StreetAddress:"",County:"",City:"",Postcode:"",AddressYears:"",EmploymentStatus:"",IncomeFrequency:"",EmployerName:"",JobTitle:"",EmploymentIndustry:"",WorkPhone:"",NextPayDate:"",FollowingPayDate:"",EmployerYears:"",NetMonthlyIncome:"",ExpenseMonthlyMortgageRent:"",ExpenseCouncil:"",ExpenseFood:"",ExpenseTransport:"",ExpenseCredit:"",ExpenseUtilities:"",ExpenseOther:"",BankDirectDeposit:"",BankCard:"",BankAccountNumber:"",BankSortCode:"",BankYears:"",ConsentFinancial:"",MarketingSms:"",MarketingEmail:"",MarketingPhone:""}}),{validateLoanAmount:U,validateLoanTerm:O,validateLoanPurpose:V,validateRecentLoanCount:H,validateTitle:$,validateFirstName:W,validateLastName:j,validateDateOfBirth:q,validateEmail:J,validateMobilePhone:z,validateHomePhone:G,validateDependants:K,validateMaritalStatus:Q,validateAdultsLivingWith:X,validateEmploymentStatus:Z,validateIncomeFrequency:ee,validateEmployerName:te,validateJobTitle:oe,validateEmploymentIndustry:se,validateEmployerYears:ae,validateNextPayDate:re,validateFollowingPayDate:ne,validateNetMonthlyIncome:le,validateResidentialStatus:me,validateHouseNameNumber:ie,validateStreetAddress:pe,validateCounty:de,validateCity:ue,validatePostcode:fe,validateAddressYears:ce,validateExpenseMonthlyMortgageRent:ye,validateTransport:he,validateUtilities:ve,validateFood:be,validateCredit:ge,validateCouncil:Ee,validateOther:Ce,validateBankCard:xe,validateBankAccountNumber:Ae,validateBankSortCode:ke}=Oe(l),a={LoanAmount:U,LoanTerm:O,LoanPurpose:V,RecentLoanCount:H,Title:$,FirstName:W,LastName:j,DateOfBirth:q,Email:J,MobilePhone:z,HomePhone:G,Dependants:K,MaritalStatus:Q,AdultsLivingWith:X,EmploymentStatus:Z,IncomeFrequency:ee,EmployerName:te,JobTitle:oe,EmploymentIndustry:se,EmployerYears:ae,NextPayDate:re,FollowingPayDate:ne,NetMonthlyIncome:le,ResidentialStatus:me,HouseNameNumber:ie,StreetAddress:pe,County:de,City:ue,Postcode:fe,AddressYears:ce,ExpenseMonthlyMortgageRent:ye,ExpenseTransport:he,ExpenseUtilities:ve,ExpenseFood:be,ExpenseCredit:ge,ExpenseCouncil:Ee,ExpenseOther:Ce,BankCard:xe,BankAccountNumber:Ae,BankSortCode:ke},{isStepValid:E,validatorsByStep:b,isStep6Valid:L}=Ye(l,t),{isSubmitting:Se,isFinished:Ne,isAccepted:Pe,isRejected:Me,progressText:Be,submitApplication:w}=Ue(l,t,L),D=Te(()=>y=>l.errors[y]?"border-red-500 bg-red-100":""),f=[{title:null,components:[{cmp:Qe,props:{"data-cy":"loan-amount",model:"LoanAmount"}},{cmp:Xe,props:{model:"LoanTerm"}},{cmp:Ze,props:{model:"LoanPurpose"}},{cmp:et,props:{model:"RecentLoanCount"}}]},{title:"Your details",components:[{cmp:Ve,props:{model:"Title"}},{cmp:He,props:{model:"FirstName",placeholder:"Enter your first name"}},{cmp:$e,props:{model:"LastName",placeholder:"Enter your last name"}},{cmp:We,props:{model:"DateOfBirth"}},{cmp:ze,props:{model:"Email"}},{cmp:je,props:{model:"MobilePhone"}},{cmp:qe,props:{model:"HomePhone"}},{cmp:Je,props:{model:"Dependants"}},{cmp:Ge,props:{model:"MaritalStatus"}},{cmp:Ke,props:{model:"AdultsLivingWith"}}]},{title:"Your Employer",components:[{cmp:tt,props:{model:"EmploymentStatus"}},{cmp:ot,props:{model:"IncomeFrequency"}},{cmp:st,props:{model:"EmployerName"},visible:C},{cmp:at,props:{model:"JobTitle"},visible:C},{cmp:rt,props:{model:"EmploymentIndustry"},visible:C},{cmp:nt,props:{model:"EmployerYears"},visible:C},{cmp:lt,props:{model:"NextPayDate"}},{cmp:mt,props:{model:"FollowingPayDate"}},{cmp:it,props:{model:"NetMonthlyIncome"}}]},{title:"Your Address",components:[{cmp:pt,props:{model:"ResidentialStatus"}},{cmp:dt,props:{model:"HouseNameNumber"}},{cmp:ut,props:{model:"StreetAddress"}},{cmp:ft,props:{model:"County"}},{cmp:ct,props:{model:"City"}},{cmp:yt,props:{model:"Postcode"}},{cmp:ht,props:{model:"AddressYears"}}]},{title:"Your Monthly Expenses",components:[{cmp:vt,props:{model:"ExpenseMonthlyMortgageRent"}},{cmp:bt,props:{model:"ExpenseTransport"}},{cmp:gt,props:{model:"ExpenseUtilities"}},{cmp:Et,props:{model:"ExpenseFood"}},{cmp:Ct,props:{model:"ExpenseCredit"}},{cmp:xt,props:{model:"ExpenseCouncil"}},{cmp:At,props:{model:"ExpenseOther"}}]},{title:"Last bit…",components:[{cmp:kt,props:{model:"BankCard"}},{cmp:St,props:{model:"BankAccountNumber"}},{cmp:Nt,props:{model:"BankSortCode"}},{cmp:Pt,props:{model:"ConsentFinancial"}}]}];function Le(){f[t.value-1].components.map(r=>r.props.model).forEach(r=>{var m;l.touched[r]=!0,(m=a[r])==null||m.call(a)}),E.value?(u.value=!1,t.value++,window.scrollTo({top:0,behavior:"smooth"})):u.value=!0}const we=["LoanAmount","County","City","AddressYears","EmploymentIndustry","EmployerYears","AddressYears"];function De(y){if(f[t.value-1].components.map(m=>m.props.model).forEach(m=>{var e;l.touched[m]=!0,(e=a[m])==null||e.call(a)}),y<t.value){u.value=!1,t.value=y;return}E.value?(u.value=!1,t.value=y,window.scrollTo({top:0,behavior:"smooth"})):u.value=!0}const C=()=>[1,2,3].includes(l.EmploymentStatus);return(y,r)=>(s(),n("div",Dt,[u.value?(s(),x(N,{key:0,type:"error",onClose:r[0]||(r[0]=m=>u.value=!1),class:"mb-4"},{default:Y(()=>r[4]||(r[4]=[I(" Please correct the highlighted errors before proceeding. ")])),_:1})):h("",!0),d("div",Ft,[(s(),n(g,null,P(f,(m,e)=>d("div",{key:e,class:"flex-1 cursor-pointer",onClick:F=>De(e+1)},[d("div",{class:S(["w-6 h-6 mx-auto rounded-full flex items-center justify-center",{"bg-green-500 text-white":e<t.value-1&&o(b)[e].value,"bg-red-500   text-white":e<t.value-1&&!o(b)[e].value,"bg-cyan-400  text-white":e+1===t.value,"bg-gray-300  text-gray-700":e+1>t.value}])},[e<t.value-1?(s(),n(g,{key:0},[o(b)[e].value?(s(),n("svg",Tt,r[5]||(r[5]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(s(),n("svg",Rt,r[6]||(r[6]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])))],64)):(s(),n(g,{key:1},[I(M(e+1),1)],64))],2),e<f.length-1?(s(),n("div",{key:0,class:S({"h-1 bg-green-500":e<t.value-1&&o(b)[e].value,"h-1 bg-red-500":e<t.value-1&&!o(b)[e].value,"h-1 bg-gray-300":e+1>=t.value})},null,2)):h("",!0)],8,It)),64))]),d("form",{onSubmit:r[3]||(r[3]=Re((...m)=>o(w)&&o(w)(...m),["prevent"]))},[f[t.value-1].title?(s(),n("h3",_t,M(f[t.value-1].title),1)):h("",!0),(s(!0),n(g,null,P(f[t.value-1].components,({cmp:m,props:e},F)=>(s(),n("div",{key:F,class:"mb-4"},[we.includes(e.model)?(s(),x(R(m),T({key:1,modelValue:o(l)[e.model],"onUpdate:modelValue":c=>o(l)[e.model]=c,error:o(l).errors[e.model],class:D.value(e.model),ref_for:!0},e,{onChange:c=>{var i;o(l).touched[e.model]=!0,(i=a[e.model])==null||i.call(a)},onBlur:c=>{var i;o(l).touched[e.model]=!0,(i=a[e.model])==null||i.call(a)}}),null,16,["modelValue","onUpdate:modelValue","error","class","onChange","onBlur"])):(s(),x(R(m),T({key:0,modelValue:o(l)[e.model],"onUpdate:modelValue":c=>o(l)[e.model]=c,error:o(l).errors[e.model],class:D.value(e.model),ref_for:!0},e,{onChange:c=>{var i;return(i=a[e.model])==null?void 0:i.call(a)},onInput:c=>{var i;return(i=a[e.model])==null?void 0:i.call(a)},onBlur:c=>{var i;o(l).touched[e.model]=!0,(i=a[e.model])==null||i.call(a)}}),null,16,["modelValue","onUpdate:modelValue","error","class","onChange","onInput","onBlur"]))]))),128)),d("div",{class:S(["flex mt-6",t.value===1?"justify-center":"justify-between"])},[t.value>1?(s(),n("button",{key:0,type:"button",onClick:r[1]||(r[1]=m=>t.value--),class:"px-4 py-2 bg-gray-300 rounded"}," Previous ")):h("",!0),t.value<f.length?(s(),n("button",{key:1,type:"button",onClick:Le,disabled:!o(E),class:"px-6 py-2 bg-cyan-400 text-white rounded disabled:opacity-50"}," Next ",8,Yt)):(s(),n("button",{key:2,type:"submit",disabled:!o(L),class:"px-8 py-2 bg-gradient-to-r from-cyan-400 to-purple-500 text-white rounded disabled:opacity-50"}," Submit ",8,Ut))],2),B.value&&!o(E)?(s(),n("div",Ot,[_(N,{status:"{ isFinished: false, isAccepted: false, isRejected: false }",text:"Please fix the errors in this step before proceeding.",onClose:r[2]||(r[2]=m=>B.value=!1)})])):h("",!0)],32),o(Se)?(s(),n("div",Vt,[_(N,{status:{isFinished:o(Ne),isAccepted:o(Pe),isRejected:o(Me)},text:o(Be)},null,8,["status","text"])])):h("",!0)]))}};export{Fo as default};
